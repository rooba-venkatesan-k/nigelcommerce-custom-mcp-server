# NigelCommerce MCP Server

This project is a custom Model Context Protocol (MCP) server that provides a bridge between AI agents and the **[NigelCommerce](https://github.com/rooba-venkatesan-k/NigelCommerce)** ecommerce backend. This server allows LLMs to interact with products, categories, users, and administrative functions through a standardized set of tools.

## Prerequisites

1.  **NigelCommerce Backend**: Ensure the main NigelCommerce application is running locally.
2.  **.NET 9 SDK**: Required to build and run this project.
3.  **Authentication Token**: To generate a token for authorized tool calls, visit the [NigelCommerce](https://github.com/rooba-venkatesan-k/NigelCommerce) for instructions.

## Setup Instructions

To properly configure the server with the necessary JWT authentication settings, you must set up **User Secrets**.

### 1. Initialize User Secrets
Navigate to the `NigelCommerceMCPServer` project directory in your terminal and run:

```powershell
dotnet user-secrets init
```

### 2. Configure JWT Settings
Execute the following commands to set the required secrets:

```powershell
dotnet user-secrets set "JWT:Key" "NigelCommerce_SuperSecretKey_For_JWT_Token_Generation_2025!"
dotnet user-secrets set "JWT:Issuer" "NigelCommerce.ServiceAPI"
dotnet user-secrets set "JWT:Audience" "NigelCommerceClients"
dotnet user-secrets set "JWT:RoleClaimType" "http://schemas.microsoft.com/ws/2008/06/identity/claims/role"
```

### 3. Update Project File
When you run `dotnet user-secrets init`, a unique GUID is generated. You must ensure this GUID is present in your `NigelCommerceMCPServer.csproj` file.

Open `NigelCommerceMCPServer.csproj` and add the `<UserSecretsId>` tag within the `<PropertyGroup>` section:

```xml
<PropertyGroup>
  <TargetFramework>net9.0</TargetFramework>
  <Nullable>enable</Nullable>
  <ImplicitUsings>enable</ImplicitUsings>
  <UserSecretsId>YOUR-GENERATED-GUID-HERE</UserSecretsId>
</PropertyGroup>
```

> [!IMPORTANT]
> Replace `YOUR-GENERATED-GUID-HERE` with the actual ID generated by the `init` command (usually found in the output or in your local secrets storage).

## Running the Application

1.  Start the **NigelCommerce** backend application.
2.  Run this MCP Server:
    ```powershell
    dotnet run --project NigelCommerceMCPServer
    ```

The server will be available for MCP-compatible clients to connect via SSE at the `/mcp` endpoint.

## Architecture

*   **Communication**: SSE (Server-Sent Events) for server-to-client, HTTP POST for client-to-server.
*   **Protocol**: JSON-RPC 2.0.
*   **Authentication**: JWT Bearer tokens forwarded to the backend. Refer to the main [NigelCommerce repository](https://github.com/rooba-venkatesan-k/NigelCommerce) for steps on how to generate these tokens.
*   **Authorization**: Role-based access control for each tool.

## Available Tools

- **Products**: `list_products`, `get_product`, `add_product`, `delete_product`
- **Categories**: `list_categories`, `get_category`, `add_category`
- **Users**: `register_user`, `list_users`
- **Admin**: `update_user_role`

---

## ðŸ“– Detailed Usage Guide

For more information on how to configure this server with **Claude Desktop** and **VS Code**, and for example prompts to test the integration, check out the [instructions.md](https://github.com/rooba-venkatesan-k/nigelcommerce-custom-mcp-server/instructions.md) file.

